# Спрощена діаграма розгортання платформи "Пошук Страв"

## 🏗️ **Архітектура системи**

```
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              📱 ПРИСТРОЇ КОРИСТУВАЧІВ                               │
│                                                                                     │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │
│  │   💻 PC     │    │  📱 Phone   │    │  📟 Tablet  │    │  🌐 Browser │         │
│  │             │    │             │    │             │    │             │         │
│  │ • Chrome    │    │ • Safari    │    │ • Chrome    │    │ • Firefox   │         │
│  │ • Firefox   │    │ • Chrome    │    │ • Safari    │    │ • Edge      │         │
│  │ • Safari    │    │ • Firefox   │    │ • Firefox   │    │             │         │
│  └─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘         │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼ HTTPS запити
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              🌐 ВЕБ-СЕРВЕР                                          │
│                                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                         ⚛️ Frontend (Next.js)                               │   │
│  │                                                                             │   │
│  │  • Сторінки: Головна, Страви, Профіль, AI-чат, Адмін                      │   │
│  │  • Компоненти: Форми, Картки, Модальні вікна                               │   │
│  │  • Стан: Автентифікація, Дані користувача                                  │   │
│  │  • Маршрутизація: /dishes, /profile, /ai-chef, /admin                      │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
│                                        │                                            │
│                                        ▼ API виклики                                │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                         🚀 Backend (Node.js/Fastify)                        │   │
│  │                                                                             │   │
│  │  • API маршрути: /api/auth, /api/dishes, /api/users                        │   │
│  │  • Сервіси: AuthService, DishService, UserService                          │   │
│  │  • Middleware: Автентифікація, Валідація, Rate Limiting                    │   │
│  │  • Інтеграції: Gemini AI, Edamam API, DeepL                                │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼ SQL запити
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              🗄️ БАЗА ДАНИХ                                          │
│                                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                         💾 PostgreSQL (Supabase)                            │   │
│  │                                                                             │   │
│  │  📊 Таблиці:                                                                │   │
│  │  ├── profiles           - Профілі користувачів                             │   │
│  │  ├── dishes             - Страви та рецепти                                │   │
│  │  ├── dish_ingredients   - Інгредієнти страв                                │   │
│  │  ├── dish_steps         - Кроки приготування                               │   │
│  │  ├── dish_categories    - Категорії страв                                  │   │
│  │  ├── dish_ratings       - Лайки та рейтинги                                │   │
│  │  ├── dish_comments      - Коментарі користувачів                           │   │
│  │  ├── dish_collections   - Колекції страв                                   │   │
│  │  ├── ai_chat_sessions   - Сесії AI-чату                                    │   │
│  │  └── ai_chat_messages   - Повідомлення чату                                │   │
│  │                                                                             │   │
│  │  🔐 Безпека:                                                                │   │
│  │  ├── Row Level Security (RLS)                                              │   │
│  │  ├── JWT автентифікація                                                     │   │
│  │  └── Ролі користувачів (user/admin)                                        │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘
                                        │
                                        ▼ File операції
┌─────────────────────────────────────────────────────────────────────────────────────┐
│                              📁 СХОВИЩЕ ЗОБРАЖЕНЬ                                   │
│                                                                                     │
│  ┌─────────────────────────────────────────────────────────────────────────────┐   │
│  │                         🖼️ Supabase Storage                                 │   │
│  │                                                                             │   │
│  │  📂 Buckets:                                                                │   │
│  │  ├── avatars/           - Аватари користувачів                             │   │
│  │  │   ├── user1-avatar.jpg                                                  │   │
│  │  │   ├── user2-avatar.png                                                  │   │
│  │  │   └── user3-avatar.webp                                                 │   │
│  │  │                                                                         │   │
│  │  └── dish-images/       - Зображення страв                                 │   │
│  │      ├── dish1-main.jpg     (головні зображення)                          │   │
│  │      ├── dish1-step1.jpg    (зображення кроків)                           │   │
│  │      ├── dish1-step2.jpg                                                   │   │
│  │      └── dish2-main.png                                                    │   │
│  │                                                                             │   │
│  │  🔒 Налаштування:                                                           │   │
│  │  ├── Публічний доступ для читання                                          │   │
│  │  ├── Обмеження розміру: 10MB                                               │   │
│  │  ├── Дозволені формати: JPG, PNG, WebP                                     │   │
│  │  └── Автоматичне стиснення                                                  │   │
│  └─────────────────────────────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────────────────────────────┘
```

## 🔄 **Потік взаємодії користувача:**

### **1. Перегляд страв:**
```
📱 Пристрій → 🌐 Веб-сервер → 🗄️ База даних → 📁 Зображення → 📱 Відображення
```

### **2. Створення страви:**
```
📱 Форма → 🌐 Завантаження зображення → 📁 Сховище → 🗄️ Збереження даних → ✅ Успіх
```

### **3. AI-чат:**
```
📱 Запит → 🌐 Backend → 🤖 Gemini AI → 🗄️ Збереження чату → 📱 Відповідь
```

### **4. Пошук інгредієнтів:**
```
📱 Пошук → 🌐 Backend → 🍎 Edamam API → 🌐 Переклад → 📱 Результати
```

## 🚀 **Розгортання:**

### **Production:**
- **Веб-сервер:** Bolt Hosting (CDN + Static hosting)
- **База даних:** Supabase Cloud (PostgreSQL)
- **Зображення:** Supabase Storage (CDN)
- **Домен:** HTTPS з SSL сертифікатом

### **Development:**
- **Веб-сервер:** localhost:5173 (Next.js) + localhost:3000 (API)
- **База даних:** Supabase Cloud (спільна з production)
- **Зображення:** Supabase Storage (окремий bucket)

## 📊 **Характеристики:**

- **Користувачі:** Необмежено (масштабується автоматично)
- **Зображення:** До 10MB на файл
- **База даних:** PostgreSQL з автоматичним backup
- **Доступність:** 99.9% uptime
- **Швидкість:** < 2 секунди завантаження сторінки